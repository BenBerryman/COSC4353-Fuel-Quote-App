<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>F&Umacr;LR - Register</title>
    <link rel="stylesheet" href="../../Components/styling.css">
</head>
<body>
    <div id="header"></div>

    <div class="container loginbox">
        
        <div class="title page-title">Create an Account</div>
        <form method="post" action="profileSetup.html" id="reg-form">
            <section class="section-content">
                <label for="email">Email Address</label>
                <input name="email" id="email" type="email" placeholder="" required>

                <label for="password">Password</label>
                <input name="password" id="password" type="password" placeholder="" required>

                <!--<label for="passwordConfirm">Confirm Password</label>
                <input id="passwordConfirm" type="ConfirmPassword" placeholder="" required>
                </section>-->
                
            
            <div class="nextPageButtonHolder"><button type="submit" class="loginRegisterButton">Create Account</button></div>

                
        </form>

<script>

const form = document.getElementById('reg-form')
form.addEventListener('submit', registerUser)

console.log('here')

async function registerUser(event) {

    event.preventDefault()
    const email = document.getElementById('email').nodeValue
    const password = document.getElementById('password').nodeValue

    const result =  await fetch('http://localhost:8000/Login/register', {

        method: 'POST',
        headers:{
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({

            email, 
            password

        })
        }).then((res) => res.json())

        console.log(result)
    }
    </script>
        <span class="legalInfo">By creating an account you agree to the our website's terms and conditions. Please see our privacy policy.</span>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
    <script>
        $(function(){
            $('#header').load('../../Components/header.html');
        });
    </script>
    
</body>
</html>